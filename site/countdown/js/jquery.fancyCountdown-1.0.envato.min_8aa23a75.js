(function(c){function o(){var i=document.URL,l=i.indexOf("://")+3,g=i.indexOf("/",l);i=i.substring(l,g);l=i.lastIndexOf(".")-1;l=i.lastIndexOf(".",l)+1;i=i.substring(l,i.length);for(g=l=0;g<i.length;++g){var f=i.charAt(g);l+=f.charCodeAt(0)}return l!=991&&i!=""?true:false}c.fancyCountdown={version:"1.0"};if(!o()){c.fn.fancyCountdown=function(i){function l(){R=Date.UTC(a.year,a.month-1,a.day,a.hour-a.timezone,a.minute,a.second);var b=R-(new Date).getTime(),d=Math.floor(b/1E3),e=Math.floor(d/60),j=
Math.floor(e/60),k=Math.floor(j/24);d%=60;e%=60;j%=24;var p=Math.floor(d%10);d=Math.floor(d/10);var r=Math.floor(e%10);e=Math.floor(e/10);var s=Math.floor(j%10);j=Math.floor(j/10);var t=Math.floor(k%10),u=Math.floor(Math.floor(k/10)%10);k=Math.floor(k/100);if(!o()){if(!w){H=p;I=d;J=r;K=e;L=s;M=j;N=t;O=u;P=k;for(var n=-2,m=0;m<4;++m){if(a.digits.seconds){x[m].text(f(p+n,0,9));y[m].text(f(d+n,0,5))}if(a.digits.minutes){z[m].text(f(r+n,0,9));A[m].text(f(e+n,0,5))}if(a.digits.hours){B[m].text(f(s+n,0,
9));C[m].text(f(j+n,0,2))}if(a.digits.days){D[m].text(f(t+n,0,9));E[m].text(f(u+n,0,9));F[m].text(f(k+n,0,9))}++n}Cufon.refresh(".fc-digitUnit")}w=true;if(!o())if(b>0){if(H!=p){Cufon.refresh(".fc-digitUnit");a.digits.seconds&&g(x,f(p-2,0,9));H=p}if(I!=d){a.digits.seconds&&g(y,f(d-2,0,5));I=d}if(J!=r){a.digits.minutes&&g(z,f(r-2,0,9));J=r}if(K!=e){a.digits.minutes&&g(A,f(e-2,0,5));K=e}if(L!=s){a.digits.hours&&g(B,f(s-2,0,9));L=s}if(M!=j){a.digits.hours&&g(C,f(j-2,0,2));M=j}if(N!=t){a.digits.days&&
g(D,f(t-2,0,9));N=t}if(O!=u){a.digits.days&&g(E,f(u-2,0,9));O=u}if(P!=k){a.digits.days&&g(F,f(k-2,0,9));P=k}}else{c.fancyCountdown.stop();c.fancyCountdown.reset();a.callback();Cufon.refresh(".fc-digitUnit")}}}function g(b,d){b[0].animate({top:-(c(b[0]).height()-a.topDigitOffset)},300);b[1].animate({top:0},300);b[2].animate({top:a.digitUnitHeight-a.bottomDigitOffset},300);b[3].animate({top:a.digitUnitHeight},300,function(){var e=b.pop();c(e).css("top",-c(e).height()+"px");e.text(d);b.unshift(e)})}
function f(b,d,e){return b<0?e+b+1:b>e?d+b-e-1:b}function q(b){h.prepend("<div style='width:"+a.digitUnitWidth+"px;height:"+a.digitUnitHeight+"px;background:"+a.fillColor+";' class='fc-digitUnit fc-"+b+"'><div class='fc-digits'><ul><li>8</li><li>9</li><li>0</li><li>1</li></ul></div><div style='width:"+a.digitUnitWidth+"px;height:"+a.digitUnitHeight+"px;' class='fc-digitOverlay'></div></div>");b=h.children("div:first").find(".fc-digits li").css({width:a.digitUnitWidth+"px","line-height":a.digitUnitHeight+
"px"});var d=[];d[0]=c(b[0]).css("top",-c(b[0]).height()+"px");d[1]=c(b[1]).css("top",-(c(b[0]).height()-a.topDigitOffset)+"px");d[2]=c(b[2]).css("top","0px");d[3]=c(b[3]).css("top",a.digitUnitHeight-a.bottomDigitOffset+"px");return d}function Q(){h.prepend("<div style='width:"+a.colonUnitWidth+"px;height:"+a.digitUnitHeight+"px;background:"+a.fillColor+";' class='fc-digitUnit'><div style='width:"+a.colonUnitWidth+"px;line-height:"+a.digitUnitHeight+"px;' class='fc-digitOverlay fc-colon'>:</div></div>")}
function G(b,d){h.append("<div class='fc-captions'>"+b+"</div>");d-=h.find("div:last").width()*0.5;h.find("div:last").css({left:d,top:a.digitUnitHeight})}var a=c.extend({},c.fn.fancyCountdown.defaults,i),h,v,R,w=false,H,I,J,K,L,M,N,O,P,x,y,z,A,B,C,D,E,F;if(!o())if(!o()){c.fancyCountdown.start=function(){if(!v){w=false;v=setInterval(l,100)}};c.fancyCountdown.stop=function(){if(v){clearInterval(v);v=null}};if(!o()){c.fancyCountdown.reset=function(){h.find(".fc-digits li").stop(true,true);for(var b=
0;b<4;++b){if(a.digits.seconds){x[b].text((8+b)%10);y[b].text((4+b)%6)}if(a.digits.minutes){z[b].text((8+b)%10);A[b].text((4+b)%6)}if(a.digits.hours){B[b].text((8+b)%10);C[b].text((1+b)%3)}if(a.digits.days){D[b].text((8+b)%10);E[b].text((8+b)%10);F[b].text((8+b)%10)}}};c.fancyCountdown.fillColor=function(b){h.children(".fc-digitUnit").css("background",b)};if(!o()){c.fancyCountdown.targetDate=function(b,d,e,j,k,p){j=j||0;k=k||0;p=p||0;a.year=parseInt(b);a.month=parseInt(d);a.day=parseInt(e);a.hour=
parseInt(j);a.minute=parseInt(k);a.second=parseInt(p);w=false};c.fancyCountdown.timezone=function(b){a.timezone=parseFloat(b)};if(!o())return this.each(function(){h=c(this);h.addClass("fc-panel");if(a.digits.seconds){x=q("seconds");y=q("seconds")}if(a.digits.minutes){a.digits.seconds&&Q();z=q("minutes");A=q("minutes")}if(a.digits.hours){a.digits.minutes&&Q();B=q("hours");C=q("hours")}if(a.digits.days){a.digits.hours&&Q();D=q("days");E=q("days");F=q("days")}if(a.captions){var b=parseInt(h.children(".fc-digitUnit").css("margin-right"))*
0.5;a.digits.seconds&&G("seconds",c(h.children(".fc-seconds")[1]).position().left-b);a.digits.minutes&&G("minutes",c(h.children(".fc-minutes")[1]).position().left-b);a.digits.hours&&G("hours",c(h.children(".fc-hours")[1]).position().left-b);a.digits.days&&G("days",c(h.children(".fc-days")[1]).position().left+a.digitUnitWidth*0.5)}if(!o()){Cufon.now();Cufon.replace(".fc-digitUnit",{fontFamily:a.fontName});a.autoStart&&c.fancyCountdown.start()}})}}}};c.fn.fancyCountdown.defaults={year:2012,month:12,
day:31,hour:0,minute:0,second:0,digitUnitWidth:60,digitUnitHeight:80,colonUnitWidth:20,topDigitOffset:25,bottomDigitOffset:24,timezone:0,fillColor:"#005152",fontName:"Harabara",autoStart:true,captions:true,digits:{days:true,hours:true,minutes:true,seconds:true},callback:function(){}}}})(jQuery);
